## Архитектурные принципы DM-base

1. **Client-light, function-heavy.** Весь тяжёлый парсинг и нормализация SARIF выполняются в Netlify Function `parse-sarif`, фронтенд остаётся реактивным Viewer’ом.
2. **Чёткий слой данных.** Любой доступ к Supabase идёт через адаптер (`netlify/lib/supabase-client.ts` + фронтовый `session.ts`), чтобы при смене бэкенда менять только один слой.
3. **Immutable artifacts.** После загрузки SARIF файл попадает в `sarif_reports.normalized`; любые derived данные строим на лету без мутаций исходной записи.
4. **Типобезопасность.** Общие типы SARIF (`frontend/src/types/sarif.ts`) синхронизируются между фронтом и функциями — изменения проходят через генерацию или ручную схему.
5. **Горизонтальное масштабирование.** Каждый пользовательский сеанс независим (session_id в localStorage); избегаем shared state в памяти функции.
6. **Fallback-friendly UI.** При недоступности Supabase фронтенд показывает graceful degradation (например, read-only просмотр локально загруженного файла).
7. **Минимум side-effects в UI.** Любая бизнес-логика (фильтры, агрегации) оформляется как чистые utility-функции, чтобы поддерживать предсказуемость и тестируемость.

